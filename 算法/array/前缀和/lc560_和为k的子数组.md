```java
package com.fisec.vpn.util;


import java.util.HashMap;
import java.util.Map;


//将所有元素的前缀和按照key:前缀和的值，value 个数保存到map中
//现在我们要求这么一个区间，满足区间和等于k的个数，我们可以遍历每个元素求前缀和
// 可以想sum[0,当前元素]-k如果这个区间存在，也就是sum[0，当前元素]-sum[0,前面的一个数]=k。
// 就说明有一个区间sum[前面的这个数，当前元素]=k 是满足条件
//如果有这个前缀和的数，就说明找到了一个，看能找到多少个

class Solution {
    public int subarraySum(int[] nums, int k) {
       Map<Integer,Integer> map =new HashMap();
       int res=0,sum=0;
       map.put(0,1); //为了方便，和之前前缀和一样，保存前0个的设置为1
        for (int num : nums) {
            sum+=num;
            if (map.containsKey(sum-k)){
                res+=map.get(sum-k);
            }
            map.put(sum,map.getOrDefault(sum,0)+1);
        }

        return res;
    }

}
```
